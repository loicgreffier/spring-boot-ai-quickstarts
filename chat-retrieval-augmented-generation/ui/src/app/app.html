<div class="chat-wrapper">
	<div class="chat-header">
		<div class="bot-avatar"></div>
		<div class="bot-info">
			<div class="bot-name">Llamabot</div>
			<div class="bot-status">ðŸŸ¢ Online Now</div>
		</div>
	</div>
	<div class="chat-content">
		@for (chat of messages; track chat) {
			<div class="chat-bubble-group">
				<div class="chat-bubble {{ chat.messageType === Type.User ? 'user' : 'bot' }}">
					{{ chat.text }}
				</div>
			</div>
		}
		@if (loading) {
			<div class="chat-bubble bot">Typing...</div>
		}
	</div>
	<div class="chat-input">
		<input
			[(ngModel)]="userInput"
			[disabled]="loading"
			(keyup.enter)="sendMessage()"
			placeholder="{{ loading ? 'Llamabot is thinking...' : 'Ask a question' }}"
		/>
		<button
			(click)="customPromptMode = !customPromptMode"
			[class]="customPromptMode ? 'active' : ''"
			title="Enable the custom RAG prompt. It replaces the default Spring AI prompt with a custom one that explicitly mentions when an answer is not found in the knowledge base and allows general chat questions."
		>
			@if (customPromptMode) {
				ON
			} @else {
				OFF
			}
		</button>
	</div>
</div>
